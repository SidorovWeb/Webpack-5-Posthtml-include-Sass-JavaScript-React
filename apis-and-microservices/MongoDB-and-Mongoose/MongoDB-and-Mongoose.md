---
title: Основы MongoDB и Mongoose
data: 08-01-2020
---

## Введение в MongoDB и Mongoose

**MongoDB** - это база данных, которая хранит записи данных (документы) для использования приложением. Mongo - это нереляционная база данных "NoSQL". Это означает, что Mongo хранит все связанные данные в одной записи, а не хранит их во многих заранее заданных таблицах, как в базе данных SQL. Некоторые преимущества этой модели хранения заключаются в следующем:

* Масштабируемость: по умолчанию нереляционные базы данных разделяются (или "совместно используются") на множество систем, а не только на одну. Это облегчает повышение производительности при меньших затратах.
* Гибкость: новые наборы данных и свойств могут быть добавлены в документ без необходимости создавать новую таблицу для этих данных.
* Репликация: копии базы данных выполняются параллельно, поэтому, если одна из них не работает, одна из копий становится новым основным источником данных.

Хотя существует много нереляционных баз данных, использование Mongo с JSON в качестве структуры хранения документов делает его логичным выбором при изучении бэкенда JavaScript. Доступ к документам и их свойствам подобен доступу к объектам в JavaScript.

**Mongoose.js** - это модуль npm для Node.js, который позволяет вам писать объекты для Mongo так же, как и в JavaScript. Это может облегчить создание документов для хранения в Mongo.

## Использование MongoDB Atlas для размещения бесплатного экземпляра mongodb для ваших проектов**

Для решения нижеследующих задач вы будете использовать MongoDB для хранения наших данных. Для упрощения конфигурации будете использовать MongoDB Atlas.

MongoDB Atlas - это платформа MongoDB Database-as-a-Service, которая в основном означает, что они настраивают и размещают базу данных для вас, делая это так, что единственная ответственность, которую вы несете, - это заполнение вашей базы данных тем, что имеет значение: данными! Мы покажем вам, как это делается.:

* Создание учетной записи в MongoDB Atlas.
* Создание нового кластера.
* Создание нового пользователя в базе данных.
* Белый список ваших IP-адресов.
* Подключение к своему кластеру.

### Создание учетной записи в MongoDB Atlas.

Давайте начнем с того, что [отправимся в MongoDB Atlas](https://www.mongodb.com/cloud/atlas).

Как только вы откроете страницу MongoDB Atlas, вам следует зарегистрироваться для получения новой учетной записи.

* Нажмите кнопку [Sign In](https://cloud.mongodb.com/user#/atlas/login) в правом верхнем углу, чтобы открыть страницу регистрации.
* Нажмите на ссылку [Register for a new account](https://cloud.mongodb.com/user#/atlas/register/accountProfile) в нижней части страницы входа.
* Заполните регистрационную форму своей информацией и нажмите кнопку `Continue`.
* Теперь вы должны войти в свой новый аккаунт и увидеть зеленую кнопку `Build a Cluster`, нажмите на нее.

### Создание нового кластера

* Выполните шаги по созданию первого кластера, следуя инструкциям, которые сайт предоставляет, и нажимая кнопку `Continue` после каждого шага.
  * Выберите поставщика облачных услуг и регион, вы можете оставить его в качестве предоставленного по умолчанию (обычно AWS).
  * Настройте спецификации вашего кластера, вы также можете оставить это как предоставленное по умолчанию, M0 Sandbox (Shared RAM, 512 MB Storage) зашифрованным.
  * Дайте вашему кластеру имя, вы также можете оставить его как предоставленное по умолчанию, Cluster0.
* Теперь нажмите зеленую кнопку `Create Cluster` в нижней части экрана и проверьте подписи к изображениям, которые они предоставляют.
* Теперь вы должны увидеть сообщение, Your cluster is being created - New clusters take between 7-10 minutes to provision (что означает, что ваш кластер создается - создание новых кластеров занимает от 7 до 10 минут). Прежде чем перейти к следующему шагу, дождитесь создания кластера.

### Создание нового пользователя в базе данных

Вы должны быть в состоянии увидеть зеленую кнопку `Get Started` в нижней левой части экрана. Вы можете нажать эту кнопку, чтобы увидеть, на каком этапе процесса вы находитесь, если вы нажмете на нее сейчас, вы можете увидеть следующий шаг, `Create your first database user`, идите вперед и нажмите на этот шаг.

* Следуйте инструкциям, нажав на вкладку `Security`.
* Нажмите на зеленую кнопку `ADD NEW USER`.
* Введите имя пользователя и пароль, а затем выберите `Read or write to any database` в разделе User Privileges, не забудьте сохранить свое имя пользователя и пароль в безопасном месте.
* Нажмите на зеленую кнопку `ADD USER` в правом нижнем углу модала.

Примечание: Вы всегда можете обновить свои привилегии до уровня администратора, однако лучше всего предоставлять разрешения пользователю по мере необходимости из соображений безопасности.

### Белый список ваших IP-адресов

* Если вы сейчас нажмете на зеленую кнопку `Get Started` в левом нижнем углу экрана, вы должны увидеть следующий шаг, чтобы сделать выделенный, `Whitelist your IP address`, нажмите на него.
  * Следуйте инструкциям, нажав на вкладку `IP Whitelist` под вкладкой `Security`.
  * Нажмите на зеленую кнопку `ADD IP ADDRESS`.
  * В модальном режиме нажмите кнопку `ALLOW ACCESS FROM ANYWHERE`, и вы увидите предварительно заполненное поле ввода белого списка 0.0.0.0/0, Нажмите зеленую кнопку `Confirm`.

### Подключение к кластеру

* Нажав на зеленую кнопку `Get Started` в левом нижнем углу экрана, должен показаться последний шаг, `Connect to your cluster`, нажмите на него.
  * Следуйте инструкциям, нажав на кнопку `Connect` в разделе `Sandbox`.
  * Во всплывающем режиме нажмите кнопку `Connect Your Application`, появится строка подключения, вы можете скопировать эту строку подключения, нажав на кнопку `Copy`.
  * Это будет последний URI, который вы будете использовать для подключения к вашей БД, он будет выглядеть примерно так `mongodb+srv://<user>:<password>@<cluster#-dbname>.mongodb.net/test?retryWrites=true`, обратите внимание, что поля user и cluster#-dbname уже заполнены для вас, все, что вам нужно будет заменить - это поле пароля на то, которое вы создали на предыдущем шаге.
* Вот и все! Теперь у вас есть URI, который вы добавите в свое приложение для подключения к базе данных. Храните этот URI в надежном месте, чтобы вы могли использовать его позже!
* Не стесняйтесь создавать отдельные базы данных для разных приложений, если им нужна отдельная база данных. Вам просто нужно создать новый проект под вашей текущей учетной записью MongoDB Atlas, построить новый кластер, добавить нового пользователя, белый список ваших IP-адресов и, наконец, подключиться к кластеру, чтобы получить новый URI.

`mongodb+srv://injashkin:<password>@cluster0-hsvns.mongodb.net/test?retryWrites=true&w=majority`