## Введение в основы Node и Express

Node.js - это среда выполнения JavaScript, которая позволяет разработчикам писать бэкэнд (серверные) программы на JavaScript. Node.js поставляется с несколькими встроенными модулями - небольшими независимыми программами, которые помогают облегчить эту задачу. Некоторые из основных модулей включают в себя:

+ HTTP: модуль, который действует как сервер
+ File System: модуль, который читает и изменяет файлы
+ Path: модуль для работы с каталогами и путями к файлам
+ Assertion Testing: модуль, который проверяет код на соответствие предписанным ограничениям

Express является еще одним модулем, который часто используется с Node.js, но не входит в него. Express выполняется между созданным Node.js сервером и фронтендом веб-приложения. Express также обрабатывает маршрутизацию приложения. Маршрутизация направляет пользователей на нужную страницу в зависимости от их взаимодействия с приложением. Хотя существуют альтернативы использованию Express, его простота делает его хорошим местом для начала при изучении взаимодействия между бэкэндом, работающим на Node.js и фронтендом.

Работа над этими заданиями будет включать в себя написание кода на Glitch в нашем стартовом проекте. После завершения каждого задания вы можете скопировать свой публичный URL-адрес Glitch (на домашнюю страницу вашего приложения) в экран задания, чтобы проверить его! При желании вы можете написать свой проект на другой платформе, но он должен быть публично виден для нашего тестирования.

Запустите этот проект на Glitch с помощью шаблона [Backend Challenges Boilerplate](https://glitch.com/edit/#!/remix/clone-from-repo?REPO_URL=https://github.com/freeCodeCamp/boilerplate-express/) (необходимо, если вы используете Glitch) или клонируйте [этот репозиторий](https://github.com/freeCodeCamp/boilerplate-express/) на GitHub! Если вы используете Glitch, не забудьте сохранить ссылку на ваш проект в безопасном месте!

## Знакомство с консолью Node

В процессе разработки важно иметь возможность проверить, что происходит в вашем коде. Node - это просто среда выполнения JavaScript. Как и на клиентском JavaScript, вы можете использовать консоль для отображения полезной отладочной информации. На локальном компьютере вы увидите консоль вывода в терминале. На Glitch вы можете открыть логи в нижней части экрана. Вы можете переключить панель журнала с помощью кнопки ‘Logs’ (внизу слева, в меню "Tools").

Мы рекомендуем держать панель журнала открытой во время работы над этими заданиями. Читая журналы, вы можете быть осведомлены о характере ошибок, которые могут возникнуть.

Если вы еще не сделали этого, пожалуйста, прочитайте инструкцию [во введении](https://www.freecodecamp.org/learn/apis-and-microservices/basic-node-and-express/) и начните новый проект на Glitch, используя [эту ссылку](https://glitch.com/edit/#!/remix/clone-from-repo?REPO_URL=https://github.com/freeCodeCamp/boilerplate-express/).

Измените файл `myApp.js` для вывода "Hello World" в консоль.

## Начало работы сервера Express

Чтобы обрабатывать запросы на сервере Express предоставляет несколько встроенных функций, таких как `app.get()`, ....

Функция `app.get(МАРШРУТ, ОБРАБОТЧИК)` обрабатывает GET-запросы и связывает указанный маршрут с обработчиком. Обработчик сработает, только в том случае, если запрос к серверу будет соответствовать указанному маршруту. В методе `app.get` первый параметр - это относительный путь (маршрут) на сервере, который может быть не только строкой, но и регулярным выражением.

```js
// подключение express
const express = require("express");
// создание объекта app
const app = express();
// для маршрута "/" определяется обработчик 
app.get("/", function(req, res){     
    // отправление ответа
    res.send("<h1>Главная страница</h1>");
});
// метод listen сообщает вашему серверу: прослушивать подключения на 3000 порту
app.listen(3000);
```

Если запустить проект и перейти в браузере по адресу http://localhost:3000/, то можно увидеть заголовок первого уровня: Главная страница

Измените код на следующий:

```js
const express = require("express");
const app = express();

app.get("/", function(req, res){       
    res.send("<h1>Главная страница</h1>");
});
app.get("/about", function(req, res){     
    res.send("<h1>О сайте</h1>");
});

app.listen(3000);
```

Теперь сервер сможет обрабатывать два маршрута в приложении: http://localhost:3000/ и http://localhost:3000/about. Таким образом, можно добавить любое количество маршрутов.

## Вывод HTML-файла

Если поместить в обработчик маршрута `app.get('/', ...)` метод `res.sendFile(path)`, то можно отвечать на запросы с помощью файла. Этот метод установит соответствующие заголовки, чтобы указать вашему браузеру, как обрабатывать файл, который вы хотите отправить, в соответствии с его типом. Затем он будет читать и отправлять файл. Этот метод требует абсолютного пути к файлу. Рекомендуется использовать глобальную переменную Node `__dirname` для вычисления пути следующим образом:

```js
absolutePath = __dirname + 'relativePath/file.ext'
```
__dirname возвращает корневой каталог.

```js
const express = require("express");
const app = express();

app.get("/", function (req, res) {
    res.sendFile(__dirname + "/views/index.html");
});

app.listen(3000);
```
Отправяет файл `/views/index.html` в качестве ответа на GET запросы маршрута `/`.

## Предоставление статических ресурсов

HTML сервер обычно имеет один или несколько каталогов, доступных пользователю. В этих каталогах обычно размещаются статические ресурсы, такие как, файлы CSS, JavaScript, изображения. В ответ на запросы пользователя сервер должен предоставлять статические ресурсы. В Express эту функциональность можно реализовать с помощью функции промежуточной обработки (middleware) `express.static(path)`, где параметр `path` является абсолютным путем к папке, содержащей ресурсы. middleware должно быть установлено с помощью `app.use(path, middlewareFunction)`. Первый аргумент `path` является необязательным. Если вы не передадите его, middleware будет выполнено для всех запросов.

Примонтируйте middleware `express.static()` для всех запросов с `app.use()`. Абсолютный путь к папке ресурсов - `__dirname + "/public"`.

Теперь ваше приложение должно иметь возможность обслуживать таблицу стилей CSS. Снаружи общая папка будет отображаться подключенной к корневому каталогу. Ваша первая страница должна выглядеть немного лучше сейчас!

https://expressjs.com/ru/starter/static-files
https://metanit.com/web/nodejs/4.4.php
https://developer.mozilla.org/ru/docs/Learn/Server-side/Express_Nodejs
